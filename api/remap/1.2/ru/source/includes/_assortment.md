<!-- include(metadata.apib) -->

# Ассортимент
## Ассортимент [/entity/assortment]
Сущность assortment представляет собой список всех товаров, услуг, комплектов, серий и модификаций с полями `stock`,
`reserve`, `inTransit`, `quantity`, показывающими остаток, резерв, ожидание и доступно каждой из сущностей (для комплектов не выводятся поля остатков и резерва).
Данные поля могут быть рассчитаны в зависимости от даты и склада с использованием параметров запроса `stockmoment` и `stockstore`.
Особенность данной сущности заключается в наличии специального параметра `search` в фильтре по нескольким полям с помощью параметра `filter`.
Используя этот параметр можно произвести контекстный поиск по объектам, выводимым в ассортименте.
Чтобы это осуществить, нужно использовать [фильтр выборки по нескольким полям](/api/remap/1.2/doc/index.html#header-фильтрация-выборки-с-помощью-параметра-filter),
указав в качестве одного из полей поле `search` и условие для этого поля - равенство поисковой строке.
+ Пример (не URL encoded): `filter=search=some_random_string`.

Поиск `filter=search=some_random_string` среди объектов ассортимента на соответствие поисковой строке будет осуществлён по следующим полям:
+ по наименованию элемента Ассортимента **name**
+ по имени модификации **name**
+ по коду **code**
+ по коду модификации **code**
+ по артикулу **article**
+ по штрихкоду **barcode**
+ по штрихкоду модификации **barcode**

Также по данной сущности можно осуществлять контекстный поиск с помощью специального параметра `search` (используется без `filter`). Подробнее можно узнать по [ссылке](#header-контекстный-поиск). Поиск с параметром search отличается от других тем, что поиск не префиксный, без токенизации и идет только по одному полю одновременно. Ищет такие строки, в которые входит значение строки поиска.

Поиск `search=some_random_string` среди объектов ассортимента на соответствие поисковой строке будет осуществлён по следующим полям:
+ по наименованию элемента ассортимента **name**
+ по описанию **description**

Также ассортимент можно запросить с использованием ссылочного фильтра по группе товаров **productFolder**.

+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`
  + stockstore: (optional, string)
  Ссылка на склад, по которому нужно получить остатки. Формат - URI.
  + stockmoment: (optional, string)
  Момент времени, на который нужно вывести остатки. Формат строки:
      - `YYYY-MM-DD HH:MM:SS`.
  + scope: (optional, string)
  Параметр фильтрации по типу объектов. Принимает одно из значений:
      - product - будут выведены только товары
      - variant - будут выведены товары и модификации
      - consignment - будут выведены все сущности (аналогично отсутствию параметра)
  + stockmode: (optional, string)
    Вид Остатка. Параметр совместим только с параметрами:limit,offset,stockstore,stockmoment. Если указаны параметры отличные от совместимых в ответ вернется
    ошибка с кодом 1069.
    <p>
      <code>Допустимые значения [all, positiveOnly, negativeOnly, empty, nonEmpty]</code>
    </p>
    По умолчанию параметр stockmode имеет значение all. Если вы хотите увидеть объекты
    с нулевым или отрицательным остатком нужно указать соответствующее значение данного параметра.

### Получить Ассортимент [GET]
Запрос на получение всех товаров, услуг, комплектов, модификаций и серий в виде списка.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка всех товаров, услуг, модификация и серий.
  + Body
        <!-- include(body/assortment/get.json) -->
