<!-- include(metadata.apib) -->

# Пользовательский справочник
## Пользовательские справочники [/entity/customentity]
### Атрибуты сущности
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о Пользовательском справочнике
+ **id** - ID в формате UUID `Только для чтения`
+ **name** - Наименование пользовательского справочника `Необходимое`

### Список пользовательских справочников
Для работы с пользовательскими справочниками вам нужно знать id каждого справочника.
Этот id обозначен в URI-параметрах запросов к данной сущности как <metadata_id>. Его
можно получить выполнив запрос на получение метаданных настроек компании. В полученном списке сущностей
в полях типа meta будет указана ссылка на каждый из справочников. В этой ссылке, последняя подстрока отделённая
знаком `/` и является идентификатором для данного справочника.
+ Пример: Выполнив вышеуказанный запрос и найдя среди списка справочника интересующих нас, мы вычленяем следующую ссылку
  из поля meta: `https://online.moysklad.ru/api/remap/1.2/context/companysettings/metadata/customEntities/eaacabaf-2655-11e6-8a84-bae500000045`
  Из данной сылки вычленяем <metadata_id> нужного нам пользовательского справочника : `eaacabaf-2655-11e6-8a84-bae500000045` и этот id используем
  для работы с данным пользовательским справочником в рамках ресурса [Пользовательский справочник](#пользовательский-справочник).

### Создать справочник [POST]
Единственным необходимым полем для создания пользовательского справочника
является поле **name**.
+ Request Пример (application/json)
Пример запроса на создание новой сущности пользовательского справочника.
  + Body
        <!-- include(body/customentity/post_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданной сущности пользовательского справочника.
  + Body
        <!-- include(body/customentity/post_response.json) -->

### Изменить справочник [PUT /entity/customentity/{metadata_id}]
Запрос на изменение справочника.
+ Parameters
  + metadata_id: `3f9a2f30-76af-11e7-6adb-ede50000000b` (required, string) - id пользовательского справочника

+ Request Пример (application/json)
Пример запроса на обновление пользовательского справочника.
  + Body
        <!-- include(body/customentity/put_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновлённого пользовательского справочника.
  + Body
        <!-- include(body/customentity/put_response.json) -->

### Удалить справочник [DELETE /entity/customentity/{metadata_id}]
Запрос на удаление пользовательского справочника.
+ Parameters
  + metadata_id: `3f9a2f30-76af-11e7-6adb-ede50000000b` (required, string) - id пользовательского справочника

+ Response 200 (application/json)
Успешное удаление пользовательского справочника.
+ Body

## Элементы Пользовательского справочника [/entity/customentity/{metadata_id}]
### Атрибуты элемента
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) об элементе Пользовательского справочника
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **updated** - дата последнего изменения `Только для чтения`
+ **name** - Наименование элемента пользовательского справочника `Необходимое`
+ **code** - Код элемента пользовательского справочника
+ **description** - Описание элемента пользовательского справочника
+ **externalCode** - Внешний элемента код пользовательского справочника


+ Parameters
  + metadata_id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id пользовательского справочника


### Получить элементы справочника [GET]
Запрос на получение всех элементов в указанном пользовательском справочнике.
Результат: Объект JSON, включающий в себя поля:
- **meta** [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о выдаче,
- **context** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о сотруднике, выполнившем запрос.
- **rows** - Массив JSON объектов, представляющих собой элементы пользовательского справочника.

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка элементов пользовательского справочника.
  + Body
        <!-- include(body/customentity_elements/get_list.json) -->
### Создать элемент справочника [POST]
Единственным необходимым полем для создания элемента пользовательского справочника
является поле **name**.
+ Request Пример (application/json)
Пример запроса на создание нового элемента пользовательского справочника.
  + Body
        <!-- include(body/customentity_elements/post_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного элемента пользовательского справочника.
  + Body
        <!-- include(body/customentity_elements/post_response.json) -->
### Удалить элемент справочника [DELETE /entity/customentity/{metadata_id}/{id}]
Запрос на удаление элемента пользовательского справочника.
+ Parameters
  + metadata_id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id пользовательского справочника
  + id: `6343f631-265d-11e6-8a84-bae500000014` (required, string) - id элемента пользовательского справочника

+ Response 200 (application/json)
Успешное удаление элемента пользовательского справочника.
+ Body

## Элемент пользовательского справочника [/entity/customentity/{metadata_id}/{id}]
+ Parameters
  + metadata_id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id пользовательского справочника
  + id: `6343f631-265d-11e6-8a84-bae500000014` (required, string) - id элемента пользовательского справочника

### Получить элемент [GET]
Запрос на получение элемента пользовательского справочника с указанным id.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление элемента пользовательского справочника с указанным id.
  + Body
        <!-- include(body/customentity_elements/get_by_id.json) -->

### Изменить элемент [PUT]
Запрос на изменение объекта, представляющего собой элемент пользовательского справочника.

+ Request Пример (application/json)
Пример запроса на обновление элемента пользовательского справочника.
  + Body
        <!-- include(body/customentity_elements/put_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновлённого элемента пользовательского справочника.
  + Body
        <!-- include(body/customentity_elements/put_response.json) -->
