# Юрлицо
Средствами JSON API можно создавать и обновлять сведения о юрлицах, запрашивать списки юрлиц и сведения по отдельным юрлицам. С помощью специального ресурса можно управлять счетами отдельного юрлица. Кодом сущности для юрлица в составе JSON API является ключевое слово **organization**.
По данной сущности можно осуществлять контекстный поиск с помощью специального параметра `search`. Подробнее можно узнать по [ссылке](/api/remap/1.2/doc/index.html#header-контекстный-поиск).

Поиск среди объектов юрлиц на соответствие поисковой строке будет осуществлён по следующим полям:
+ По наименованию Юрлица **name**
+ По коду Юрлица **code**
+ По полному наименованию Юрлица **legalTitle**
+ По адресу электронной почты **email**
+ По номеру городского телефона **phone**
+ По номеру дисконтной карты

## Юрлица

+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о юрлице
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **syncId** - ID синхронизации. После заполнения недоступен для изменения.
+ **owner** - Ссылка на Владельца (Сотрудника) в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **shared** - Общий доступ
+ **group** - Отдел сотрудника в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **updated** - Момент последнего обновления сущности `Только для чтения`
+ **name** - Краткое наименование юрлица `Необходимое`
+ **description** - Комментарий к Юр. лицу
+ **code** - Код юрлица
+ **externalCode** - Внешний код юрлица
+ **archived** - Добавлено ли юрлицо в архив
+ **created** - Дата создания
+ **companyType** - Тип юрлица. `[Юридическое лицо, Индивидуальный предприниматель, Физическое лицо]`.
В зависимости от значения данного поля набор выводимых реквизитов юрлица может меняться.  Подробнее [тут](#header-тип-юрлица)

### Поля реквизитов
___
+ **legalTitle** - Полное наименование юрлица
+ **legalAddress** - Юридический адрес юрлица
+ **inn** - ИНН
+ **kpp** - КПП
+ **ogrn** - ОГРН
+ **ogrnip** - ОГРНИП
+ **okpo** - ОКПО
+ **certificateNumber** - Номер свидетельства
+ **certificateDate** - Дата свидетельства
___
+ **email** - Электронная почта
+ **phone** - Телефон
+ **fax** - Факс
+ **accounts** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные), представляющие собой ссылку на счета юрлица
+ **attributes** - Коллекция доп. полей в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **isEgaisEnable** - Включен ли ЕГАИС для данного юрлица
+ **fsrarId** - Идентификатор в ФСРАР
+ **payerVat** - Является ли данное юрлицо плательщиком НДС
+ **utmUrl** - IP-адрес УТМ
+ **actualAddress** - Фактический адрес юрлица
+ **director** - Руководитель
+ **chiefAccountant** - Главный бухгалтер


### Атрибуты вложенных сущностей
#### Счета юрлица
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **updated** - Момент последнего обновления сущности`Только для чтения`
+ **isDefault** - Является ли счёт основным счётом юрлица
+ **accountNumber** - Номер счёта `Необходимо`
+ **bankName** - Наименование банка
+ **bankLocation** - Адрес банка
+ **correspondentAccount** - Корр счет
+ **bic** - БИК
+ **agent** - Ссылка на юрлицо (тип [Мета](/api/remap/1.2/doc/index.html#header-метаданные)) `Необходимо`

### Тип юрлица
В зависимости от типа юрлица **companyType** в составе его объекта будут выводиться разные наборы реквизитов.
Типы юрлица и соответствующие значения, которые могут быть переданы в значение данного поля:
| Тип юрлица                | Значение поля companyType  |
| ------------------------------ |:---------------------------|
| Юридическое лицо               | legal                      |
| Индивидуальный предприниматель | entrepreneur               |
| Физическое лицо                | individual                 |

Если тип юрлица `Юридическое лицо`, будут выведены следующие поля реквизитов:
+ **legalTitle** - Полное наименование юрлица
+ **legalAddress** - Юридический адрес юрлица
+ **inn** - ИНН
+ **kpp** - КПП
+ **ogrn** - ОГРН
+ **okpo** - ОКПО

Если тип юрлица `Индивидуальный предприниматель`, будут выведены следующие поля реквизитов:
+ **legalTitle** - Полное наименование юрлица
+ **legalAddress** - Юридический адрес юрлица
+ **inn** - ИНН
+ **okpo** - ОКПО
+ **ogrnip** - ОГРНИП
+ **certificateNumber** - Номер свидетельства
+ **certificateDate** - Дата свидетельства

Если тип юрлица `Физическое лицо`, будут выведены следующие поля реквизитов:
+ **legalTitle** - Полное наименование юрлица
+ **legalAddress** - Юридический адрес юрлица
+ **inn** - ИНН

О работе с доп. полями юрлиц можно прочитать [здесь](/api/remap/1.2/doc/index.html#header-работа-с-дополнительными-полями)


### Получить список юрлиц
Запрос на получение списка юрлиц на данной учётной записи.
- **meta** [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о выдаче,
- **context** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о сотруднике, выполнившем запрос.
- **rows** - Массив JSON объектов, представляющих собой юрлица.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

+ Response 200 (application/json)
Успешный запрос.Результат: Объект JSON, включающий в себя поля:
  + Body
        <!-- include(body/organization/get_list.json) -->

### Создать юрлицо [POST]
Запрос на создание нового юрлица.
### Описание
Юрлицо создаётся на основе переданного объекта JSON,
который содержит представление нового юрлица.

+ Request Пример (application/json)
Пример создания нового юрлица.
  + Body
        <!-- include(body/organization/post_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного юрлица.
  + Body
        <!-- include(body/organization/post_response.json) -->

+ Request Пример с доп. полями(application/json)
Пример создания нового юрлица с доп полями в теле запроса.
  + Body
        <!-- include(body/organization/post_with_attributes_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного юрлица.
  + Body
        <!-- include(body/organization/post_with_attributes_response.json) -->

### Массовое создание и обновление юрлиц [POST]
[Массовое создание и обновление](/api/remap/1.2/doc/index.html#header-создание-и-обновление-нескольких-объектов) юрлиц.
В теле запроса нужно передать массив, содержащий JSON представления юрлиц, которые вы хотите создать или обновить.
Обновляемые юрлица должны содержать идентификатор в виде метаданных.

+ Request Пример (application/json)
Пример создания и обновления нескольких юрлиц
  + Body
        <!-- include(body/organization/post_massive_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - массив JSON представлений созданных и обновленных юрлиц.
  + Body
        <!-- include(body/organization/post_massive_response.json) -->

### Удалить юрлицо [DELETE /entity/organization/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id юрлица

Запрос на удаление юрлица с указанным id.

+ Response 200 (application/json)
Успешное удаление юрлица.

## Метаданные юрлиц
Запрос на получение метаданных юрлиц. Результат - объект JSON, включающий в себя:
+ **meta** - Ссылка на метаданные юрлиц
+ **attributes** - Массив объектов доп. полей юрлиц в формате [Метаданных](#header-метаданные)
+ **createShared** - создавать новые юрлица с меткой "Общий"

Структура отдельного объекта, представляющего доп. поле подробно описана в разделе [Работа с дополнительными полями](#header-работа-с-дополнительными-полями).

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление доп. полей юрлиц.
  + Body
        <!-- include(body/organization/get_metadata.json) -->

## Отдельное доп. поле
+ Parameters
  + id: `5290a290-0313-11e6-9464-e4de00000020` (required, string) - id Доп. поля

Запрос на получение информации по отдельному дополнительному полю.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление отдельного доп. поля.
  + Body
        <!-- include(body/organization/metadata_by_id.json) -->

## Юрлицо [/entity/organization/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id юрлица.

### Получить юрлицо [GET]
Запрос на получение юрлица с указанным id.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление нового юрлица.
  + Body
        <!-- include(body/organization/get_by_id.json) -->
### Изменить юрлицо [PUT]
Запрос на обновление юрлица с указанным id.

+ Request Пример (application/json)
Пример запроса на обновление юрлица с указанным id.
  + Body
        <!-- include(body/organization/post_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON обновлённого юрлица.
  + Body
        <!-- include(body/organization/post_response.json) -->

+ Request Пример с доп полями (application/json)
Пример запроса на обновление юрлица с указанным id.
  + Body
        <!-- include(body/organization/put_with_attributes_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON обновлённого юрлица.
  + Body
        <!-- include(body/organization/put_with_attributes_response.json) -->

## Счета юрлица [/entity/organization/{id}/accounts]
Список счетов юрлица с указанным id.
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id юрлица.

### Получить список счетов юрлица [GET]
Возвращает массив JSON представлений счетов юрлица.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

+ Response 200 (application/json)
Успешный запрос.
  + Body
        <!-- include(body/organization/get_accounts.json) -->

### Изменить счета юрлица[POST]
### Описание
Обновляются счета юрлица с указанным id.
Обновляются все поля, указанные в JSON объекте запроса, кроме
помеченных `Только для чтения` в описании [атрибутов счетов юрлица](#header-счета-юрлица).
Поля, которые не были указаны в JSON запроса, не изменяются.
+ Request Пример (application/json)
  + Body
      <!-- include(body/put_accounts_body.json) -->

+ Response 200 (application/json)
  + Body
      <!-- include(body/put_accounts_response.json) -->
