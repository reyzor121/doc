<!-- include(metadata.apib) -->

# Документ Прайс-лист
Средствами JSON API можно создавать и обновлять сведения о Прайс-листах, запрашивать списки Прайс-листов и сведения по отдельным Прайс-листам. Позициями Прайс-листов можно управлять как в составе отдельного Прайс-листа, так и отдельно - с помощью специальных ресурсов для управления позициями Прайс-листа. Кодом сущности для Прайс-листа в составе JSON API является ключевое слово **pricelist**. Больше о Прайс-листах и работе с ними в основном интерфейсе вы можете прочитать в нашей службе поддержки по  [этой ссылке](https://support.moysklad.ru/hc/ru/articles/203025356-%D0%9F%D1%80%D0%B0%D0%B9%D1%81-%D0%BB%D0%B8%D1%81%D1%82%D1%8B).
## Прайс-листы [/entity/pricelist]
### Атрибуты сущности
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о Прайс-листе
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **syncId** - ID синхронизации. После заполнения недоступен для изменения.
+ **updated** - Момент последнего обновления сущности `Только для чтения`
+ **deleted** - Момент последнего удаления сущности `Только для чтения`
+ **name** - название Прайс-листа
+ **description** - Комментарий Прайс-листа
+ **externalCode** - Внешний код Прайс-листа
+ **priceType** - Объект типа цены `Только для чтения`
  - **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о Типе цены `Только для чтения`
  - **id** - ID в формате UUID `Только для чтения`
  - **name** - Наименование Типа цены `Необходимое`
  - **externalCode** - Внешний код Типа цены
+ **columns** - Массив столбцов описания таблицы `Необходимое` `Только для чтения`
+ **moment** - Дата Прайс-листа
+ **applicable** - Отметка о проведении
+ **owner** - Ссылка на Владельца (Сотрудника) в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **shared** - Общий доступ
+ **group** - Отдел сотрудника в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **organization** - Ссылка на ваше юрлицо в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **state** - Статус Прайс-листа в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **attributes** - Коллекция доп. полей в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
<br>Поля при expand'е:</br>
  - **name** - номер документа
  - **moment** - дата печати
  - **href** - ссылка на файл печатной формы
  - **fileName** - название файла печатной формы
  - **updated** - дата последнего изменения
+ **created** - Дата создания `Только для чтения`
+ **positions** - Ссылка на позиции в Прайс-листе в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)

### Позиции Прайс-листа
Позиции Прайс-листа - это список товаров/услуг/модификаций.
Объект позиции Прайс-листа содержит следующие поля:
+ **id** - ID товара в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **assortment** - Ссылка на товар/услугу/модификацию, которую представляет собой позиция, в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **pack** - Упаковка товара
+ **cells** - массив значений столбцов в позиции Прайс-листа

С позициями можно работать с помощью [специальных ресурсов для управления позициями Прайс-листа](#документ-прайс-лист-позиции-прайс-листа),
а также в составе отдельного Прайс-листа. При работе в составе отдельного Прайс-листа,
вы можете отправлять запросы на создание отдельного Прайс-листа с включенным в тело запроса
массивом позиций Прайс-листа. Если количество позиций превышает максимально допустимое, то для
дальнейшего пополнения позиций нужно будет работать со специальным ресурсом "Позиции Прайс-листа".
Также, при работе в составе отдельной Прайс-листа, можно отправлять запросы на обновление списка позиций
с включенным в тело запроса массивом позиций Прайс-листа. При этом важно помнить, что коллекция позиций будет
восприниматься как "все позиции Прайс-листа" и полностью заменит уже существующую коллекцию при обновлении объекта - лишние
позиции будут удалены, новые добавлены, существующие - изменены.


### Столбцы
Поле **columns** - массив, содержащий в себе объекты со следующими атрибутами:
+ name - Название столбца `Необходимое`
+ percentageDiscount - Процентная наценка или скидка по умолчанию для столбца

На столбцы налагаются следующие ограничения:
- Название столбца не может отсутствовать или быть пустым
- Название столбца должно быть уникальным в пределах одного Прайс-листа
- Опциональное значение percentageDiscount должно быть числом.

### Ячейки
Поле **cells** - массив, содержащий в себе объекты со следующими атрибутами:
+ column - Название столбца, к которому относится данная ячейка `Необходимое`
+ sum - Числовое значение ячейки `Необходимое`

При создании если значения ячеек позиций Прайс-листа были не указаны, то заполнятся значениями по умолчанию те ячейки,
столбцы которых имеют значение скидки(наценки) по умолчанию. Элементы массива cells соотносятся с колонками по названию
по значению поля column.

О работе с доп. полями Прайс-листов можно прочитать [здесь](/api/remap/1.2/doc/index.html#header-работа-с-дополнительными-полями)


### Получить список Прайс-листов [GET]
Запрос всех Прайс-листов на данной учётной записи.
Результат: Объект JSON, включающий в себя поля:
- **meta** [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о выдаче,
- **context** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о сотруднике, выполнившем запрос.
- **rows** - Массив JSON объектов, представляющих собой Прайс-листы.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

  + search: `0001` (optional, string)
    URL Параметр для поиска по имени документа.
    Фильтр документов по указанной поисковой строке. Фильтрация происходит по
    полю name.

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка Прайс-листов.
  + Body
        <!-- include(body/pricelist/get_list.json) -->

### Создать Прайс-лист[POST]
Запрос на создание нового Прайс-листа.
Обязательные для создания поля:
+ **name** - номер Прайс-листа (номер)
+ **organization** - Ссылка на ваше юрлицо в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **columns** - Массив объектов, описывающих столбцы нового прайс-листа

Примечание: если при создании Прайс-листа указать несуществующий тип цен, то Прайс-лист создастся с типом цен продаж по умолчанию.

+ Request Пример 1 (application/json)
Пример создания нового Прайс-листа с телом запроса, содержащим только необходимые поля.
  + Body
        <!-- include(body/pricelist/post_request_short.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного Прайс-листа.
  + Body
        <!-- include(body/pricelist/post_response_short.json) -->

+ Request Пример 2 (application/json)
Пример создания нового Прайс-листа с более насыщенным телом запроса.
  + Body
        <!-- include(body/pricelist/post_request_long.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного Прайс-листа.
  + Body
        <!-- include(body/pricelist/post_response_long.json) -->

+ Request Пример с доп. полями (application/json)
Пример запроса на создание Прайс-листа с доп. полями.
  + Body
        <!-- include(body/pricelist/post_with_attributes_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного Прайс-листа.
  + Body
        <!-- include(body/pricelist/post_with_attributes_response.json) -->


+ Request Пример с позициями (application/json)
Пример запроса на создание Прайс-листа с позициями в теле запроса.
  + Body
        <!-- include(body/pricelist/post_with_positions_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданного Прайс-листа.
  + Body
        <!-- include(body/pricelist/post_with_positions_response.json) -->

### Массовое создание и обновление Прайс-листов [POST]
[Массовое создание и обновление](/api/remap/1.2/doc/index.html#header-создание-и-обновление-нескольких-объектов) Прайс-листов.
В теле запроса нужно передать массив, содержащий JSON представления Прайс-листов, которые вы хотите создать или обновить.
Обновляемые Прайс-листы должны содержать идентификатор в виде метаданных.

+ Request Пример (application/json)
Пример создания и обновления нескольких Прайс-листов
  + Body
        <!-- include(body/pricelist/post_massive_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - массив JSON представлений созданных и обновленных Прайс-листов.
  + Body
        <!-- include(body/pricelist/post_massive_response.json) -->

### Удалить Прайс-лист [DELETE /entity/pricelist/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id Прайс-листа

Запрос на удаление Прайс-листа с указанным id.

+ Response 200 (application/json)
Успешное удаление Прайс-листа.

## Метаданные Прайс-листов [/entity/pricelist/metadata]
### Метаданные Прайс-листов [GET]
Запрос на получение метаданных Прайс-листов. Результат - объект JSON, включающий в себя:
+ **meta** - Ссылка на метаданные Прайс-листов
+ **attributes** - Массив объектов доп. полей Прайс-листов в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **states** - Массив статусов Прайс-листов
+ **createShared** - создавать новые Прайс-листы с меткой "Общий"

Структура отдельного объекта, представляющего доп. поле подробно описана в разделе [Работа с дополнительными полями](/api/remap/1.2/doc/index.html#header-работа-с-дополнительными-полями).

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление доп. полей Прайс-листов.
  + Body
        <!-- include(body/pricelist/get_metadata.json) -->

## Отдельное доп. поле [/entity/pricelist/metadata/attributes/{id}]
+ Parameters
  + id: `666f86f9-afec-11e6-8af5-581e00000087` (required, string) - id Доп. поля
### Отдельное доп. поле [GET]
Запрос на получение информации по отдельному дополнительному полю.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление отдельного доп. поля.
  + Body
        <!-- include(body/pricelist/metadata_by_id.json) -->

## Прайс-лист [/entity/pricelist/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id Прайс-листа

### Получить Прайс-лист [GET]
Запрос на получение отдельного Прайс-листа с указанным id.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление Прайс-листа.
  + Body
        <!-- include(body/pricelist/get_by_id.json) -->


### Изменить Прайс-лист [PUT]
Запрос на обновление Прайс-листа с указанным id.
В теле запроса можно указать только те поля, которые необходимо изменить у Прайс-листа, кроме тех, что
помечены `Только для чтения` в описании [атрибутов Прайс-листа](#документ-прайс-лист-прайс-листы).

+ Request Пример (application/json)
Пример запроса на обновление отдельного Прайс-листа.
  + Body
        <!-- include(body/pricelist/put_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновленного Прайс-листа.
  + Body
        <!-- include(body/pricelist/put_response.json) -->


+ Request Пример с доп. полями (application/json)
Пример запроса на изменение Прайс-листа с дополнительными полями.
  + Body
        <!-- include(body/pricelist/put_with_attributes_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновленного Прайс-листа.
  + Body
        <!-- include(body/pricelist/put_with_attributes_response.json) -->

+ Request Пример с позициями (application/json)
Пример запроса на обновление Прайс-листа с позициями в теле запроса.
  + Body
        <!-- include(body/pricelist/put_with_positions_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновленного Прайс-листа.
  + Body
        <!-- include(body/pricelist/put_with_positions_response.json) -->
## Позиции Прайс-листа [/entity/pricelist/{id}/positions]
Отдельный ресурс для управления позициями Прайс-листа. С его помощью вы можете управлять позициями большого документа, количество строк в котором превышает лимит на количество строк, сохраняемых вместе с документом. Этот лимит равен 100. Более подробно о лимитах на количество строк документа и работе с большими документами можно прочитать [тут](/api/remap/1.2/doc/index.html#header-работа-с-позициями-документов).
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id Прайс-листа
### Получить позиции Прайс-листа [GET]
Запрос на получение списка всех позиций данного Прайс-листа.
- **meta** [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о выдаче,
- **context** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о сотруднике, выполнившем запрос.
- **rows** - Массив JSON объектов, представляющих собой позиции Прайс-листа.

+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка позиций отдельного Прайс-листа.
  + Body
        <!-- include(body/pricelist/positions_get_list.json) -->

### Создать позицию Прайс-листа [POST]
Запрос на создание новой позиции в Прайс-листе.
Для успешного создания необходимо в теле запроса указать следующие поля:
+ **assortment** - Ссылка на товар/услугу/модификацию, которую представляет собой позиция.
+ **cells** - Массив ячеек цен для новой позиции. Может быть не указан, в таком случае создадутся те ячейки, у которых есть процентная наценка по умолчанию.
+ Request Пример с одной позицией (application/json)
Пример создания одной позиции в Прайс-листе.
  + Body
        <!-- include(body/pricelist/positions_post_one_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление созданной позиции отдельного Прайс-листа.
  + Body
        <!-- include(body/pricelist/positions_post_one_response.json) -->

+ Request Пример с несколькими позициями (application/json)
Пример создания сразу нескольких позиций в Прайс-листе.
  + Body
        <!-- include(body/pricelist/positions_post_some_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка созданных позиций отдельного Прайс-листа.
  + Body
        <!-- include(body/pricelist/positions_post_some_response.json) -->

## Позиция Прайс-листа [/entity/pricelist/{id}/positions/{positionID}]
+ Parameters
  + id: `d72b4281-b000-11e6-8af5-581e00000074` (required, string) - id Прайс-листа
  + positionID: `9560e3e3-9609-11e6-8af5-581e00000008` (required, string) - id позиции Прайс-листа

### Получить позицию [GET]
Запрос на получение отдельной позиции Прайс-листа с указанным id.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление отдельной позиции Прайс-листа.
  + Body
        <!-- include(body/pricelist/positions_get_by_id.json) -->

### Изменить позицию [PUT]
Запрос на обновление отдельной позиции Прайс-листа. Для обновления позиции нет каких-либо
 обязательных для указания в теле запроса полей. Только те, что вы желаете обновить.
+ Request Пример (application/json)
Пример запроса на обновление отдельной позиции в Прайс-листе.
  + Body
        <!-- include(body/pricelist/positions_put_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновлённой позиции Прайс-листа.
  + Body
        <!-- include(body/pricelist/positions_put_response.json) -->

### Удалить Позицию [DELETE]
Запрос на удаление позиции Прайс-листа с указанным id.

+ Response 200 (application/json)
Успешное удаление позиции Прайс-листа.
