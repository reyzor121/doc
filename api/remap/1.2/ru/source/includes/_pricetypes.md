<!-- include(metadata.apib) -->

# Типы цен

Средствами JSON API можно создавать и обновлять сведения о Типах цен, запрашивать списки Типов цен и сведения по отдельным Типам цен по id.
Кодом сущности для Типа цен в составе JSON API является ключевое слово **pricetype**. 

## Типы цен [/context/companysettings/pricetype]
### Атрибуты сущности
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о Типе цены `Только для чтения`
+ **id** - ID в формате UUID `Только для чтения`
+ **name** - Наименование Типа цены `Необходимое`
+ **externalCode** - Внешний код Типа цены

### Получить список всех типов цен [GET /context/companysettings/pricetype]
Получить список всех типов цен
+ Response 200 (application/json)
  + Body
        <!-- include(body/pricetype/get_all.json) -->
        
### Редактирование списка типов цен [POST /context/companysettings/pricetype]

Типы цен возможно редактировать только полным списком.
+ Для создания нового типа цены, необходимо передать существующий список типов цен и новый объект, 
содержащий наименование нового типа цены.
+ Для обновления существующего типа цены необходимо передать мету этого типа цены, а также новое наименование.
+ Для удаления типа цены нужно исключить объект из передаваемого списка.
+ При сохранении списка типов цен сохраняется и порядок их следования.
+ Тип цены, указанный в списке первым элементом, становится типом цены по умолчанию.

Ограничения:
+ Нельзя создать более 100 типов цен.
+ Нельзя удалить все типы цен.
+ При создании нового типа цены наименование должно быть уникальным.
+ При создании нового типа наименование не должно быть пустым или отсутствовать.
+ Внешний код нельзя удалить. При передаче пустой строки при редактировании типа цены будет сгенерирован случайный внешний код.

+ Request Пример 1 (application/json)
Создание нового типа цены. 
  + Body
        <!-- include(body/pricetype/create.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновленного списка типов цен.
  + Body
        <!-- include(body/pricetype/get_all.json) -->

+ Request Пример 2 (application/json)
Обновление существующего списка.
  + Body
        <!-- include(body/pricetype/get_all.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление обновленного списка типов цен.
  + Body
        <!-- include(body/pricetype/get_all.json) -->

## Тип цены [/context/companysettings/pricetype]

### Получить тип цены по ID [GET /context/companysettings/pricetype/{id}]
Получить тип цены по ID
+ Parameters
  + id: `a8967d6b-b026-11e7-9464-d04800000000` (required, string) - ID типа цены
+ Response 200 (application/json)
  + Body
        <!-- include(body/pricetype/get.json) -->

### Получить тип цены по умолчанию [GET /context/companysettings/pricetype/default]
Получить тип цены по умолчанию
+ Response 200 (application/json)
  + Body
        <!-- include(body/pricetype/get.json) -->
