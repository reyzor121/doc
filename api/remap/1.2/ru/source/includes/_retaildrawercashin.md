<!-- include(metadata.apib) -->

# Документ Внесение денег
Средствами JSON API можно создавать и обновлять сведения о внесениях денег, запрашивать списки внесений денег и сведения по отдельным внесениям денег. Кодом сущности для внесения денег в составе JSON API является ключевое слово **retaildrawercashin**. Больше о внесениях денег и работе с ними в основном интерфейсе вы можете прочитать в нашей службе поддержки по  [этой ссылке](https://support.moysklad.ru/hc/ru/articles/203325423-%D0%A0%D0%BE%D0%B7%D0%BD%D0%B8%D1%86%D0%B0#10).
## Внесения денег [/entity/retaildrawercashin/]
### Атрибуты сущности
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о внесении денег
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи `Только для чтения`
+ **syncId** - ID синхронизации. После заполнения недоступен для изменения.
+ **updated** - Момент последнего обновления сущности `Только для чтения`
+ **deleted** - Момент последнего удаления сущности `Только для чтения`
+ **name** - номер внесения денег
+ **description** - Комментарий внесения денег
+ **externalCode** - Внешний код внесения денег
+ **moment** - Дата внесения
+ **applicable** - Отметка о проведении
+ **sum** - Сумма внесения в установленной валюте `Только для чтения`
+ **rate** - Валюта
+ **owner** - Ссылка на Владельца (Сотрудника) в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **shared** - Общий доступ
+ **group** - Отдел сотрудника в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **organization** - Ссылка на ваше юрлицо в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Необходимое`
+ **agent** - Ссылка на сотрудника, совершившего внесение, в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Необходимое`
+ **state** - Статус внесения в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
+ **attributes** - Коллекция доп. полей в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные)
<br>Поля при expand'е:</br>
  - **name** - номер документа
  - **moment** - дата печати
  - **href** - ссылка на файл печатной формы
  - **fileName** - название файла печатной формы
  - **updated** - дата последнего изменения
+ **created** - Дата создания `Только для чтения`
### Связи с другими документами
+ **retailShift** - Ссылка на розничную смену, в рамках которой было выполнено внесение денег в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Необходимое`

<!-- include(rate.apib) -->

### Получить внесения денег [GET]
Запрос на получение всех внесений денег на данной учётной записи.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

  + search: `0001` (optional, string)
    URL Параметр для поиска по имени документа.
    Фильтр документов по указанной поисковой строке. Фильтрация происходит по
    полю name.

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка внесений денег.
  + Body
        <!-- include(body/retaildrawercashin/get_list.json) -->

### Создать внесение денег [POST]
Запрос на создание внесения денег.
+ Request Пример 1 (application/json)
Пример создания нового внесения денег.
  + Body
        <!-- include(body/retaildrawercashin/post_request.json) -->
+ Response 200
  + Body
        <!-- include(body/retaildrawercashin/post_response.json) -->

### Массовое создание и обновление внесений денег [POST]
[Массовое создание и обновление](/api/remap/1.2/doc/index.html#header-создание-и-обновление-нескольких-объектов) внесений денег.
В теле запроса нужно передать массив, содержащий JSON представления внесений денег, которые вы хотите создать или обновить.
Обновляемые внесения денег должны содержать идентификатор в виде метаданных.

+ Request Пример (application/json)
Пример создания и обновления нескольких внесений денег
  + Body
        <!-- include(body/retaildrawercashin/post_massive_request.json) -->

+ Response 200 (application/json)
Успешный запрос. Результат - массив JSON представлений созданных и обновленных внесений денег.
  + Body
        <!-- include(body/retaildrawercashin/post_massive_response.json) -->

### Удалить внесение денег [DELETE /entity/retaildrawercashin/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id внесения денег

Запрос на удаление внесения денег с указанным id.

## Метаданные внесений денег [/entity/retaildrawercashin/metadata]
### Метаданные внесений денег [GET]
Запрос на получение метаданных внесений денег. Результат - объект JSON, включающий в себя:
+ **meta** - Ссылка на метаданные внесений денег
+ **attributes** - Массив объектов доп. полей внесений денег в формате [Метаданных](#header-метаданные)
+ **states** - Массив статусов внесений денег
+ **createShared** - создавать новые внесения денег с меткой "Общий"

Структура отдельного объекта, представляющего доп. поле подробно описана в разделе [Работа с дополнительными полями](#header-работа-с-дополнительными-полями).

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление доп. полей внесений денег.
  + Body
        <!-- include(body/retaildrawercashin/get_metadata.json) -->

## Отдельное доп. поле [/entity/retaildrawercashin/metadata/attributes/{id}]
+ Parameters
  + id: `5290a290-0313-11e6-9464-e4de00000020` (required, string) - id Доп. поля
### Отдельное доп. поле [GET]
Запрос на получение информации по отдельному дополнительному полю.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление отдельного доп. поля.
  + Body
        <!-- include(body/retaildrawercashin/metadata_by_id.json) -->

## Шаблон внесения денег [/entity/retaildrawercashin/new]

### Шаблон внесения денег [PUT]
Запрос на получение предзаполненого стандартными значениями шаблона внесения денег без связи с каким-либо документом.

+ Request Пустое тело запроса (application/json)

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление предзаполненного внесения денег.
  + Body
        <!-- include(body/retaildrawercashin/new_empty.json) -->

### Шаблон внесения денег на основе [PUT]
Запрос на получение предзаполненного внесения денег на основе розничной смены.
В результате запроса, будет создан предзаполненный шаблон внесения денег на основе переданной
розничной смены.
<br>
Внимание! Не забывайте, что поле **retailShift** должно быть написано с большой S.
+ Request Пример с розничной сменой (application/json)
Запрос на создание внесения денег на основе розничной смены.
  + Body
        <!-- include(body/retaildrawercashin/new_shift_request.json) -->
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление предзаполненного внесения денег.
  + Body
        <!-- include(body/retaildrawercashin/new_shift_response.json) -->



## Внесение денег [/entity/retaildrawercashin/{id}]

### Получить внесение денег [GET]
Запрос на получение отдельного внесения денег с указанным id.

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление внесения денег с указанным id.
  + Body
        <!-- include(body/retaildrawercashin/get_by_id.json) -->

### Изменить внесение денег [PUT]
Запрос на обновление внесения денег.
+ Request Пример 1 (application/json)
Пример обновления внесения денег.
  + Body
        <!-- include(body/retaildrawercashin/put_request.json) -->
+ Response 200
  + Body
        <!-- include(body/retaildrawercashin/put_response.json) -->
