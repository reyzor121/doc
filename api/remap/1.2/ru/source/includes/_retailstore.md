<!-- include(metadata.apib) -->

# Точка продаж
## Точки продаж [/entity/retailstore]
Средствами JSON API можно запрашивать списки Точек продаж и сведения по отдельным точкам продаж. Также можно получить доступ к специальному ресурсу для управления кассирами точки продаж. Кодом сущности для точки продаж в составе JSON API является ключевое слово **retailstore**. Больше о точках продаж и работе с ними в основном интерфейсе вы можете прочитать в нашей службе поддержки по [этой ссылке](https://support.moysklad.ru/hc/ru/articles/203325423-%D0%A0%D0%BE%D0%B7%D0%BD%D0%B8%D1%86%D0%B0) в разделе "Создание точки продаж в основном интерфейсе".
По данной сущности можно осуществлять контекстный поиск с помощью специального параметра `search`. Подробнее можно узнать по [ссылке](/api/remap/1.2/doc/index.html#header-контекстный-поиск). Поиск с параметром search отличается от других тем, что поиск не префиксный, без токенизации и идет только по одному полю одновременно. Ищет такие строки, в которые входит значение строки поиска.

Поиск среди объектов точек продаж на соответствие поисковой строке будет осуществлён по следующим полям:
+ по наименованию Точки продаж **name**
+ по адресу Точки продаж **address**

### Атрибуты сущности
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о смене`Только для чтения`
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи`Только для чтения`
+ **owner** - Ссылка на Владельца (Сотрудника) в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **shared** - Общий доступ `Только для чтения`
+ **group** - Отдел сотрудника в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **updated** - Момент последнего обновления сущности `Только для чтения`
+ **name** - Наименование точки продаж `Только для чтения`
+ **description** - Описание точки продаж `Только для чтения`
+ **externalCode** - Внешний код точки продаж `Только для чтения`
+ **archived** - Добавлена ли точка продаж в архив `Только для чтения`
+ **address** - Адрес `Только для чтения`
+ **controlShippingStock** - Контроль остатков `Только для чтения`
+ **onlyInStock** - Выгружать только товары в наличии. Доступно только при активном контроле остатков. Влияет только на выгрузку остатков в POS API  `Только для чтения`
+ **active** - Включена `Только для чтения`
+ **controlCashierChoice** - Выбор продавца `Только для чтения`
+ **discountEnable** - Разрешить скидки
+ **discountMaxPercent** - Максимальная скидка (в процентах)
+ **priceType** - Тип цен, с которыми будут продаваться товары в рознице `Только для чтения`
+ **cashiers** - Ссылка на Кассиров в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **egaisEnabled** - Точка продаж должна передавать данные в ЕГАИС
+ **frNumber** - Номер модели ФР
+ **organization** - Ссылка на ваше юрлицо в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **store** - Ссылка на склад в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **acquire** - Банк-эквайер `Только для чтения`
+ **issueOrders** - Выдача заказов `Только для чтения`
+ **sellReserves** - Учет резервов `Только для чтения`
+ **lastOperationNames** - Последние операции `Только для чтения`
+ **ofdEnabled** - Отправлять электронный чек через ОФД
+ **allowCustomPrice** - Разрешить продажу по свободной цене
+ **authTokenAttached** - создан ли токен для точки продаж `Только для чтения`
+ **orderToState** - Ссылка на статус, который проставится заказу после проведения продажи на его основании (если указано), в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **customerOrderStates** - Ссылка на статусы, в которых выгружаются заказы в точку продаж (если указано), в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **environment** - информация об окружении
+ **state** - информация о статусе точки продаж

#### Аттрибуты сущности Окружение
+ **device** - информация об устройстве
+ **os** - информация об операционной системе
+ **software** - информация о ПО
+ **chequePrinter** - данные о ККТ
+ **paymentTerminal** - информация о платежном терминале
##### Аттрибуты сущности ПО
+ **name** - наименование ПО. `Необходимое`
+ **vendor** - Производитель.
+ **version** - версия ПО.
##### Аттрибуты сущности ККТ
+ **vendor** - Производитель
+ **name** - Наименование. `Необходимое`
+ **serial** - серийный номер
+ **fiscalDataVersion** - формат фискальных данных
+ **driver** - информация об используемом драйвере
+ **fiscalMemory** - информация о фискальном накопителе
+ **firmwareVersion** - Версия прошивки ККТ
##### Аттрибуты сущности Драйвер
+ **name** - наименования драйвера
+ **version** - Версия драйвера
##### Аттрибуты сущности Фискальный накопитель
+ **fiscalDataVersion** - версия фискальной памяти

#### Аттрибуты сущности Статус
+ **sync** - состояние синхронизации
+ **lastCheckMoment** - дата и время последней синхронизации
+ **fiscalMemory** - информация о фискальной памяти
+ **paymentTerminal** - информация о платежном терминале `Deprecated`

##### Аттрибуты сущности Синхронизация
+ **message** - состояние синхронизации.
+ **lastAttempMoment** - Дата последней сихронизации (не обязательно успешной). `Необходимое`
##### Аттрибуты сущности Фискальная Память
+ **error** - информация об ошибке ФН
+ **notSendDocCount** - Количество неотправленных документов в ОФД
+ **notSendFirstDocMoment** - Дата первого документа в очереди на отправку
##### Аттрибуты сущности Ошибка
+ **сode** - код ошибки ФН
+ **message** - описание ошибки
##### Аттрибуты сущности Платежный Терминал
+ **acquiringType** - информация о типе эквайера (например: inpas/payme)


#### Последние операции
Поле **lastOperationNames** представляет собой массив объектов со следующей структурой:

+ **entity** - Ключевое слово, обозначающее тип последней операции `Только для чтения`
+ **name** - Наименование (номер) последней операции `Только для чтения`

Представляет собой краткий список последних операций на данной точке продаж. Если продаж на данной точке по факту нет, то номера продаж будут фейковые

#### Кассиры
Сущность кассир представляет собой объект, содержащий ссылки на [Сотрудника](/api/remap/1.2/doc/employee.html#сотрудник), назначенного кассиром,
и [Точку продаж](#точка-продаж), к которой он привязан.
Подробнее о сущности Кассира можно посмотреть в разделе [Кассиры](#кассир)
##### Атрибуты сущности Кассир
+ **meta** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о смене`Только для чтения`
+ **id** - ID в формате UUID `Только для чтения`
+ **accountId** - ID учетной записи`Только для чтения`
+ **employee** - Ссылка на сотрудника в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`
+ **retailStore** - Ссылка на точку продаже в формате [Метаданных](/api/remap/1.2/doc/index.html#header-метаданные) `Только для чтения`


### Получить точки продаж [GET]
Запрос всех Розничных точек продаж на данной учётной записи.
Результат: Объект JSON, включающий в себя поля:
- **meta** [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о выдаче,
- **context** - [Метаданные](/api/remap/1.2/doc/index.html#header-метаданные) о сотруднике, выполнившем запрос.
- **rows** - Массив JSON объектов, представляющих собой Розничные точки продаж.
+ Parameters
  + limit: 1000 (optional, enum[number])
  Максимальное количество сущностей для извлечения.
  <p>
    <code>Допустимые значения 1 - 1000</code>
  </p>
      + Default: `1000`
  + offset: 40 (optional, number)
    Отступ в выдаваемом списке сущностей
      + Default: `0`

+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление списка Розничных точек продаж.
  + Body
        <!-- include(body/retailstore/get_list.json) -->

### Удалить точку продаж [DELETE /entity/retailstore/{id}]
Запрос на удаление Розничной точки продаж с указанным id.
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id Точки продаж

+ Response 200 (application/json)
Успешное удаление Розничной точки продаж.

## Точка продаж [/entity/retailstore/{id}]
+ Parameters
  + id: `7944ef04-f831-11e5-7a69-971500188b19` (required, string) - id Точки продаж

### Получить точку продаж [GET]
Запрос на получение отдельной Розничной точки продаж с указанным id.
+ Response 200 (application/json)
Успешный запрос. Результат - JSON представление точки продаж.
  + Body
        <!-- include(body/retailstore/get_by_id.json) -->
